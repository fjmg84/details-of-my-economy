---
import FinanceTotals from "@components/FinanceTotals.astro";
import PrincipalLayout from "./Layout.astro";
import Nav from "@components/share/Nav.astro";
import IconComponent from "@components/Icons/IconComponent.astro";
import MenuIcon from "@components/Icons/MenuIcon.astro";
---

<PrincipalLayout>
  <div class="flex h-screen">
    <!-- Sidebar -->
    <aside
      class="hidden md:flex w-[280px] bg-white border-r border-gray-200 flex-col"
    >
      <div class="flex flex-col gap-6 p-6">
        <!-- Logo -->
        <a
          href="/"
          class="flex items-center gap-3 px-3 py-2 bg-blue-600 rounded-lg"
        >
          <span class="text-lg font-bold text-white">Mi Economía</span>
        </a>

        <!-- Navigation -->
        <Nav />
      </div>
    </aside>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col overflow-hidden bg-slate-50">
      <div class="flex-1 overflow-auto">
        <slot />
      </div>
    </div>

    <!-- Mobile Navigation -->
    <div
      id="mobileNav"
      class="fixed inset-y-0 bg-white w-full -right-full duration-300 ease-in-out z-50"
    >
      <div class="flex flex-col gap-6 p-6 h-full overflow-y-auto">
        <div class="flex items-center gap-3 px-3 py-2 bg-blue-600 rounded-lg">
          <span class="text-lg font-bold text-white">Mi Economía</span>
        </div>

        <Nav />
        <div class="mt-4">
          <FinanceTotals />
        </div>
      </div>
    </div>

    <!-- Mobile Menu Button -->
    <div class="md:hidden fixed top-6 right-6 z-50">
      <button
        id="mobileNavBtn"
        class="bg-blue-100 p-3 rounded-lg shadow-lg hover:bg-blue-200 transition-colors"
      >
        <IconComponent color="currentColor" sizeX="24" sizeY="24">
          <MenuIcon />
        </IconComponent>
      </button>
    </div>
  </div>
</PrincipalLayout>

<script>
  const mobileNavBtn = document.getElementById("mobileNavBtn");

  if (mobileNavBtn) {
    mobileNavBtn.addEventListener("click", () => {
      const nav = document.getElementById("mobileNav");
      if (nav) {
        nav.classList.toggle("-right-full");
        nav.classList.toggle("right-0");
      }
    });
  }
</script>
